<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Model - RadonDefectPredictor</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Model";
    var mkdocs_page_input_path = "cli/model.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> RadonDefectPredictor</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Getting Started</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../..">Quick Start</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Command-line Usage</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../getting_started/">Getting Started</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../train/">Train</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Model</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#download-or-load-a-pre-trained-model">Download or load a pre-trained model</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#download-from-apis">Download from APIs</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../predict/">Predict</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../apis/">API Reference</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">RadonDefectPredictor</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Command-line Usage &raquo;</li>
        
      
        
          <li>Getting Started &raquo;</li>
        
      
    
    <li>Model</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/radon-h2020/radon-defect-predictor/edit/master/docs/cli/model.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="download-or-load-a-pre-trained-model">Download or load a pre-trained model</h1>
<p><code>radon-defect-predictor model</code></p>
<pre><code class="prompt">usage: radon-defect-predictor model [-h] {download,load} ...

positional arguments:
  {download}
    download       Download a pre-trained model from the online APIs

optional arguments:
  -h, --help       show this help message and exit
</code></pre>

<h2 id="download-from-apis">Download from APIs</h2>
<p><code>radon-defect-predictor model download ...</code></p>
<pre><code class="prompt">usage: radon-defect-predictor model download [-h] --path-to-repository PATH_TO_REPOSITORY --host {github,gitlab} [-t TOKEN] -l {ansible,tosca} -d DEST

optional arguments:
  -h, --help            show this help message and exit
  --path-to-repository PATH_TO_REPOSITORY
                        path to the cloned repository
  --host {github,gitlab}
                        whether the repository is hosted on Github or Gitlab
  -t TOKEN, --token TOKEN
                        the Github or Gitlab personal access token
  -l {ansible,tosca}, --language {ansible,tosca}
                        the language of the file (i.e., TOSCA or YAML-based Ansible)
  -d DEST, --destination DEST
                        destination folder to save the model
</code></pre>

<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">--path-to-repository</td>
<td align="left">True</td>
</tr>
<tr>
<td align="left">--host</td>
<td align="left">True</td>
</tr>
<tr>
<td align="left">-t, --token</td>
<td align="left">True</td>
</tr>
<tr>
<td align="left">-l, --language</td>
<td align="left">True</td>
</tr>
<tr>
<td align="left">-d, --destination</td>
<td align="left">True</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="-path-to-repository">--path-to-repository</h3>
<p><strong><code>radon-defect-predictor model download --path-to-csv path/to/local/git/repository/</code></strong></p>
<p>The path to the a local <strong>git repository</strong>. <br>
It is necessary to select the appropriate model for the repository at hand.
Indeed, the downloaded model is the model trained on the most similar repository based on the following criteria: </p>
<ul>
<li><strong>Core contributors:</strong> the number of contributors whose total number of commits accounts for 80% or more of the total contributions.</li>
<li><strong>Continuous integration (CI):</strong> the repository has evidence of a CI service, determined by the presence of a configuration file required by that service (e.g., a.travis.ymlfor TravisCI).</li>
<li><strong>Comments ratio:</strong> ratio between comments and lines of code.</li>
<li><strong>Commit frequency:</strong> the average number of commits per month.</li>
<li><strong>Issue frequency:</strong> the average number of issue events transpired per month.</li>
<li><strong>License availability:</strong> the repository has evidence of a license (i.e., a LICENSE file).</li>
<li><strong>Lines of Code:</strong> the number of executable lines of code. </li>
<li><strong>Ratio of IaC scripts:</strong> ratio between Infrastructure-as-Code (IaC) files and total files.</li>
</ul>
<p>The value of each criterion is automatically extracted by the <a href="https://github.com/radon-h2020/radon-repository-scorer"><code>radon-repository-scorer</code></a> this tool depends on. <br></p>
<h3 id="-host">--host</h3>
<p><strong><code>radon-defect-predictor model download --host github</code></strong> <br>
<strong><code>radon-defect-predictor model download --host gitlab</code></strong></p>
<p>The hosting platform for software development and version control using Git. Github and Gitlab are supported.
This option is required to use the appropriate APIs (<a href="https://github.com/PyGithub/PyGithub"><code>pygithub</code></a> or <a href="https://github.com/python-gitlab/python-gitlab"><code>python-gitlab</code></a>) to compute some of the aforementioned criteria.</p>
<h3 id="-t-token">-t, --token</h3>
<p><strong><code>radon-defect-predictor model download -t &lt;SECRET_TOKEN&gt;</code></strong> <br></p>
<p>The personal access token to access Github and Gitlab APIs.
See how to get one from <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">Github</a> and <a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html">Gitlab</a>. <br>
Once generated, pass the token to the <code>--token</code> option. <br>
If not passed in the command, the user will be prompt for inserting one. For example:</p>
<pre><code>radon-defect-predictor model download --path-to-repository some/path --host github -l ansible -d some/other/path/
Github access token: ***************
</code></pre>

<p>You may want to avoid the previous step. If so, add the following to your environment variables:</p>
<ul>
<li>
<p><code>GITHUB_ACCESS_TOKEN=&lt;paste here your token&gt;</code> for Github, and/or</p>
</li>
<li>
<p><code>GITLAB_ACCESS_TOKEN=&lt;paste here your token&gt;</code> for Gitlab.</p>
</li>
</ul>
<h3 id="-l-language">-l, --language</h3>
<p><strong><code>radon-defect-predictor model download --l ansible</code></strong> <br>
<strong><code>radon-defect-predictor model download --l tosca</code></strong></p>
<p>Every models are trained for a specific language. 
To download the proper model the user must specify the language (s)he wants to apply it to.
Ansible and TOSCA are currently supported.
If the project contains both Ansible and Tosca files, the user can download two models by running the command twice, passing the optiion <code>-l ansible</code> and <code>-l tosca</code>, respectively.</p>
<h3 id="-d-destination">-d, --destination</h3>
<p><strong><code>radon-defect-predictor train --d path/to/model-info/</code></strong></p>
<p>The path to the <strong>folder</strong> where to download the following files about the model:</p>
<ul>
<li>
<p><code>path/to/model-info/model.pkl</code> - the exported model in pickle format. After training a model, it is desirable to have a way to persist the model for future use without having to retrain. </p>
</li>
<li>
<p><code>path/to/model-info/model_features.json</code> - the features selected by feature selection during training. It is important to track these features so to reduce the <em>test instances</em> to the same set of features used for training. </p>
</li>
<li>
<p><code>path/to/model-info/model_report.json</code> - the cross-validation report of model training.</p>
</li>
</ul>
<p><strong>Important!</strong> </p>
<ul>
<li>
<p>Do not delete any of these files if you want to test new instances with the <a href="https://radon-h2020.github.io/radon-defect-predictor/cli/predict/"><code>radon-defect-predictor predict</code></a> using the downloaded model.</p>
</li>
<li>
<p>Make sure you save the model and related files to a distinct folder for each repository and language (i.e., Ansible and Tosca) to avoid conflicts with existing models, features and reports.
Use the same folder only if you are overriding a model. The downloaded model will replace the existing one.</p>
</li>
</ul>
<p><br></p>
<h3 id="examples">Examples</h3>
<!-- ## Load from disk
```radon-defect-predictor model load ...```

<pre><code class="prompt">usage: radon-defect-predictor model load [-h] --path-to-model PATH_TO_MODEL_DIR

optional arguments:
  -h, --help            show this help message and exit
  --path-to-model PATH_TO_MODEL_DIR
                        path to the folder containing the model report
</code></pre>


| Option | Required |
|:---|:---|
| --path-to-model | True |

<br>

### --path-to-model 

**```radon-defect-predictor model load --path-to-model path/to/model/```**

The path to the **folder** containing model report (model, selected_features and report).
The folder has to be structured as follows:

*path/to/*<br>
&emsp;|- *model/*<br>
&emsp;&emsp;|- *model.pkl*<br>
&emsp;&emsp;|- *model_features.json*<br>
&emsp;&emsp;|- *model_report.json*<br>

Information about the aforementioned files can be found [here](https://radon-h2020.github.io/radon-defect-predictor/cli/train/#-d-destination) or [here](https://radon-h2020.github.io/radon-defect-predictor/cli/model/#-d-destination).
-->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../predict/" class="btn btn-neutral float-right" title="Predict">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../train/" class="btn btn-neutral" title="Train"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/radon-h2020/radon-defect-predictor/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../train/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../predict/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
